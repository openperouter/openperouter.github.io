<!doctype html><html lang=en-us dir=ltr><head><meta name=generator content="Hugo 0.147.8"><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  OpenPERouter
  #

OpenPERouter is an open implementation of a Provider Edge (PE) router, designed to terminate multiple VPN protocols on Kubernetes nodes and expose a BGP interface to the host network.
This project is in the early stage of development. Use carefully!

  Enable L3 EVPN in your cluster
  #

OpenPERouter enables L3 EVPN tunneling to any BGP enabled Kubernetes component,
such as Calico, MetalLB, KubeVip, Cilium, FRR-K8s and many others, behaving as an external router."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://openperouter.github.io/openperouter/"><meta property="og:site_name" content="OpenPERouter official docs"><meta property="og:title" content="Home"><meta property="og:description" content="OpenPERouter # OpenPERouter is an open implementation of a Provider Edge (PE) router, designed to terminate multiple VPN protocols on Kubernetes nodes and expose a BGP interface to the host network.
This project is in the early stage of development. Use carefully!
Enable L3 EVPN in your cluster # OpenPERouter enables L3 EVPN tunneling to any BGP enabled Kubernetes component, such as Calico, MetalLB, KubeVip, Cilium, FRR-K8s and many others, behaving as an external router."><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><title>Home | OpenPERouter official docs</title><link rel=icon href=/openperouter/favicon.png><link rel=manifest href=/openperouter/manifest.json><link rel=canonical href=https://openperouter.github.io/openperouter/><link rel=stylesheet href=/openperouter/book.min.d5e59cb0aa8d22a5813c62cd5e25d3d172489a369c61dc3f622ee96ae1ebb457.css integrity="sha256-1eWcsKqNIqWBPGLNXiXT0XJImjacYdw/Yi7pauHrtFc=" crossorigin=anonymous><script defer src=/openperouter/fuse.min.js></script><script defer src=/openperouter/en.search.min.7ceb4100d6a41c25288e467ea9b012a93b1fc6e6189ecc2fea33ab7a9d91e07d.js integrity="sha256-fOtBANakHCUojkZ+qbASqTsfxuYYnswv6jOrep2R4H0=" crossorigin=anonymous></script><link rel=alternate type=application/rss+xml href=https://openperouter.github.io/openperouter/index.xml title="OpenPERouter official docs"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/openperouter/><span>OpenPERouter official docs</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/openperouter/docs/concepts/>Concepts</a></li><li><a href=/openperouter/docs/architecture/>Architecture</a></li><li><a href=/openperouter/docs/installation/>Installation</a></li><li><a href=/openperouter/docs/configuration/>Configuration</a></li><li><a href=/openperouter/docs/examples/>Examples</a><ul><li><a href=/openperouter/docs/examples/metallb/>MetalLB Integration</a></li></ul></li><li><a href=/openperouter/docs/api-reference/>API Reference</a></li><li><a href=/openperouter/docs/contributing/>Contributing</a><ul><li><a href=/openperouter/docs/contributing/devenv/>The development environment</a></li><li><a href=/openperouter/docs/contributing/code-of-conduct/>Code of Conduct</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/openperouter/svg/menu.svg class=book-icon alt=Menu></label><h3>Home</h3><label for=toc-control><img src=/openperouter/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#openperouter>OpenPERouter</a></li><li><a href=#enable-l3-evpn-in-your-cluster>Enable L3 EVPN in your cluster</a></li><li><a href=#enable-l2-evpn-in-the-cluster>Enable L2 EVPN in the cluster</a></li><li><a href=#overview>Overview</a></li><li><a href=#why-run-the-router-on-the-host>Why Run the Router on the Host?</a></li><li><a href=#a-separate-network-namespace>A separate network namespace</a></li><li><a href=#integration-benefits>Integration Benefits</a><ul><li><a href=#seamless-bgp-integration>Seamless BGP Integration</a></li><li><a href=#l2-integration-with-multus>L2 integration with Multus</a></li><li><a href=#operational-advantages>Operational Advantages</a></li><li><a href=#hybrid-cloud>Hybrid Cloud</a></li><li><a href=#network-segmentation>Network Segmentation</a></li><li><a href=#load-balancer-integration>Load Balancer Integration</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h2 id=openperouter>OpenPERouter
<a class=anchor href=#openperouter>#</a></h2><p>OpenPERouter is an open implementation of a Provider Edge (PE) router, designed to terminate multiple VPN protocols on Kubernetes nodes and expose a BGP interface to the host network.</p><p><strong>This project is in the early stage of development. Use carefully!</strong></p><h2 id=enable-l3-evpn-in-your-cluster>Enable L3 EVPN in your cluster
<a class=anchor href=#enable-l3-evpn-in-your-cluster>#</a></h2><p>OpenPERouter enables L3 EVPN tunneling to any BGP enabled Kubernetes component,
such as Calico, MetalLB, KubeVip, Cilium, FRR-K8s and many others, behaving as an external router.</p><p>Behaving as an external router, the integration is seamless and BGP based, exactly as if a physical
Provider Edge Router was moved inside the node.</p><h2 id=enable-l2-evpn-in-the-cluster>Enable L2 EVPN in the cluster
<a class=anchor href=#enable-l2-evpn-in-the-cluster>#</a></h2><p>OpenPERouter supports L2 overlays, allowing seamless communication between nodes using a stretched
layer 2 domain.</p><h2 id=overview>Overview
<a class=anchor href=#overview>#</a></h2><p>Where we normally have a node interacting with the TOR switch, which is configured to map the VLans to a given VPN tunnel,
OpenPERouter runs directly in the node, exposing one Veth interface per VPN tunnel.</p><p>After OpenPERouter is configured and deployed on a cluster, it can interact with any BGP-speaking component of the cluster, including FRR-K8s, MetalLB, Calico and others. The abstraction is as if a physical Provider Edge Router was moved inside the node.</p><p>Here is a high level overview of the abstraction, on the left side a classic Kubernetes deployment connected via vlan interfaces, on the right side a deployment of OpenPERouter on a Kubernetes node:</p><p>L3:</p><p><img src=/images/openpedescription.svg alt></p><p>L2:</p><p><img src=/images/openpedescriptionl2.svg alt></p><h2 id=why-run-the-router-on-the-host>Why Run the Router on the Host?
<a class=anchor href=#why-run-the-router-on-the-host>#</a></h2><p>Running the router directly on the host provides greater flexibility and simplifies configuration compared to manually setting up each VPN tunnel and mapping it to a VLAN on a traditional router. With OpenPERouter, the configuration is managed using Kubernetes Custom Resource Definitions (CRDs), allowing you to declaratively define VPN tunnels and their properties.</p><h2 id=a-separate-network-namespace>A separate network namespace
<a class=anchor href=#a-separate-network-namespace>#</a></h2><p>The router runs in a separate network namespace, and interacts with the host using a veth pair serving as entry points
for the L3 domain.</p><p><img src=/images/openpeinside.svg alt></p><h2 id=integration-benefits>Integration Benefits
<a class=anchor href=#integration-benefits>#</a></h2><h3 id=seamless-bgp-integration>Seamless BGP Integration
<a class=anchor href=#seamless-bgp-integration>#</a></h3><p>OpenPERouter behaves exactly like a physical PE router, enabling seamless integration with
MetalLB, Calico, Cilium, FRR-K8s and any other BGP speaking component.</p><h3 id=l2-integration-with-multus>L2 integration with Multus
<a class=anchor href=#l2-integration-with-multus>#</a></h3><p>With L2 overlays, the same configuration achievable with Vlans and Multus secondary interfaces
can be achieved using OpenPERouter.</p><h3 id=operational-advantages>Operational Advantages
<a class=anchor href=#operational-advantages>#</a></h3><p>A key operational advantage is that no changes are required to your existing external router or network fabric. You can deploy the solution without reconfiguring your current network infrastructure.</p><h3 id=hybrid-cloud>Hybrid Cloud
<a class=anchor href=#hybrid-cloud>#</a></h3><ul><li>Extend on-premises networks to Kubernetes clusters</li><li>Maintain consistent routing policies across environments</li></ul><h3 id=network-segmentation>Network Segmentation
<a class=anchor href=#network-segmentation>#</a></h3><ul><li>Production, development, and management networks</li><li>Secure isolation between different network segments</li></ul><h3 id=load-balancer-integration>Load Balancer Integration
<a class=anchor href=#load-balancer-integration>#</a></h3><ul><li>Advertise LoadBalancer services across the fabric</li><li>Enable external access to Kubernetes services</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#openperouter>OpenPERouter</a></li><li><a href=#enable-l3-evpn-in-your-cluster>Enable L3 EVPN in your cluster</a></li><li><a href=#enable-l2-evpn-in-the-cluster>Enable L2 EVPN in the cluster</a></li><li><a href=#overview>Overview</a></li><li><a href=#why-run-the-router-on-the-host>Why Run the Router on the Host?</a></li><li><a href=#a-separate-network-namespace>A separate network namespace</a></li><li><a href=#integration-benefits>Integration Benefits</a><ul><li><a href=#seamless-bgp-integration>Seamless BGP Integration</a></li><li><a href=#l2-integration-with-multus>L2 integration with Multus</a></li><li><a href=#operational-advantages>Operational Advantages</a></li><li><a href=#hybrid-cloud>Hybrid Cloud</a></li><li><a href=#network-segmentation>Network Segmentation</a></li><li><a href=#load-balancer-integration>Load Balancer Integration</a></li></ul></li></ul></nav></div></aside></main></body></html>