<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="L3 Passthrough concepts"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://openperouter.github.io/docs/concepts/passthrough/"><meta property="og:site_name" content="OpenPERouter official docs"><meta property="og:title" content="L3 Passthrough"><meta property="og:description" content="L3 Passthrough concepts"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2025-01-27T10:00:00+02:00"><meta property="article:modified_time" content="2025-01-27T10:00:00+02:00"><title>L3 Passthrough | OpenPERouter official docs</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://openperouter.github.io/docs/concepts/passthrough/><link rel=stylesheet href=/book.min.d5e59cb0aa8d22a5813c62cd5e25d3d172489a369c61dc3f622ee96ae1ebb457.css integrity="sha256-1eWcsKqNIqWBPGLNXiXT0XJImjacYdw/Yi7pauHrtFc=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.73ba38f9e1c489ebc43cf7a53893d7b8c44b222dab5b130fa59e8fa3df0c8f5f.js integrity="sha256-c7o4+eHEievEPPelOJPXuMRLIi2rWxMPpZ6Po98Mj18=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>OpenPERouter official docs</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/docs/concepts/>Concepts</a><ul><li><a href=/docs/concepts/evpn/>EVPN - VXLan</a></li><li><a href=/docs/concepts/passthrough/ class=active>L3 Passthrough</a></li></ul></li><li><a href=/docs/architecture/>Architecture</a></li><li><a href=/docs/installation/>Installation</a></li><li><a href=/docs/configuration/>Configuration</a><ul><li><a href=/docs/configuration/evpn/>EVPN Configuration</a></li><li><a href=/docs/configuration/passthrough/>Passthrough Configuration</a></li></ul></li><li><a href=/docs/examples/>Examples</a><ul><li><a href=/docs/examples/evpnexamples/>EVPN Examples</a><ul><li><a href=/docs/examples/evpnexamples/metallb/>MetalLB Integration</a></li><li><a href=/docs/examples/evpnexamples/kubevirt-multi-cluster/>Stretching a layer 2 overlay across multiple KubeVirt clusters</a></li><li><a href=/docs/examples/evpnexamples/calico/>Calico Integration</a></li><li><a href=/docs/examples/evpnexamples/kubevirt/>KubeVirt L2 Integration</a></li><li><a href=/docs/examples/evpnexamples/layer2/>Layer 2 Integration</a></li></ul></li><li><a href=/docs/examples/passthroughexamples/>Passthrough Examples</a><ul><li><a href=/docs/examples/passthroughexamples/metallb/>MetalLB Integration</a></li></ul></li></ul></li><li><a href=/docs/api-reference/>API Reference</a></li><li><a href=/docs/contributing/>Contributing</a><ul><li><a href=/docs/contributing/devenv/>The development environment</a></li><li><a href=/docs/contributing/code-of-conduct/>Code of Conduct</a></li><li><a href=/docs/contributing/how-to-release/>How to release</a></li></ul></li><li><a href=/docs/release-notes/>Release Notes</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>L3 Passthrough</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#key-characteristics>Key Characteristics</a><ul><li><a href=#direct-bgp-participation>Direct BGP Participation</a></li><li><a href=#no-isolation>No Isolation</a></li></ul></li><li><a href=#architecture-components>Architecture Components</a><ul><li><a href=#veth-pair-configuration>Veth Pair Configuration</a></li><li><a href=#ip-allocation-strategy>IP Allocation Strategy</a></li><li><a href=#bgp-session-configuration>BGP Session Configuration</a></li></ul></li><li><a href=#control-plane-operations>Control Plane Operations</a><ul><li><a href=#route-advertisement-host--fabric>Route Advertisement (Host → Fabric)</a></li><li><a href=#route-reception-fabric--host>Route Reception (Fabric → Host)</a></li></ul></li><li><a href=#data-plane-operations>Data Plane Operations</a><ul><li><a href=#traffic-flow>Traffic Flow</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h2 id=overview>Overview
<a class=anchor href=#overview>#</a></h2><p>L3 Passthrough is a networking mode in OpenPERouter that provides direct BGP connectivity between the host and the BGP fabric without encapsulation. Unlike EVPN mode which uses VXLAN tunnels, passthrough mode allows the host to participate directly in the BGP fabric as a peer.</p><h2 id=key-characteristics>Key Characteristics
<a class=anchor href=#key-characteristics>#</a></h2><h3 id=direct-bgp-participation>Direct BGP Participation
<a class=anchor href=#direct-bgp-participation>#</a></h3><p>In passthrough mode, OpenPERouter establishes a BGP session directly with BGP-speaking components on the host (such as MetalLB). This session operates in the same BGP domain as the fabric, allowing the host to:</p><ul><li>Advertise routes directly to the fabric</li><li>Receive routes directly from the fabric</li><li>Participate in the BGP routing decisions without encapsulation overhead</li></ul><h3 id=no-isolation>No Isolation
<a class=anchor href=#no-isolation>#</a></h3><p>Unlike the other VPN modes (currently EVPN), passthrough does not provide traffic isolation nor encapsulation. Traffic flows directly between the host and the fabric without tunnel overhead, making it suitable for scenarios where the host needs direct access to the fabric.</p><ul><li>Low latency is critical</li><li>Simple routing is preferred over complex overlay networks</li><li>Direct fabric participation is required</li></ul><p><strong>Note</strong>: Only one L3 passthrough configuration can be defined per OpenPERouter instance, as passthrough mode operates exclusively within the default VRF and does not support VRF isolation.</p><h2 id=architecture-components>Architecture Components
<a class=anchor href=#architecture-components>#</a></h2><h3 id=veth-pair-configuration>Veth Pair Configuration
<a class=anchor href=#veth-pair-configuration>#</a></h3><p>OpenPERouter automatically creates a veth pair for passthrough connectivity:</p><ul><li><strong>Host side</strong>: <code>pt-host</code> - Connected to the host network namespace</li><li><strong>Router side</strong>: <code>pt-ns</code> - Connected to the OpenPERouter network namespace</li></ul><h3 id=ip-allocation-strategy>IP Allocation Strategy
<a class=anchor href=#ip-allocation-strategy>#</a></h3><p>The IP addresses for the veth pair are allocated from the configured <code>localcidr</code>:</p><ul><li><strong>Router side</strong>: Gets the first IP in the CIDR (e.g., <code>192.169.10.1</code>)</li><li><strong>Host side</strong>: Gets the second IP in the CIDR (e.g., <code>192.169.10.2</code>)</li></ul><p>This consistent allocation ensures that BGP-speaking components on the host can always use the same router IP address for establishing BGP sessions.</p><h3 id=bgp-session-configuration>BGP Session Configuration
<a class=anchor href=#bgp-session-configuration>#</a></h3><p>The passthrough BGP session is configured with:</p><ul><li><strong>Local ASN</strong>: The router&rsquo;s ASN (e.g., 64514)</li><li><strong>Remote ASN</strong>: The host&rsquo;s ASN (e.g., 64515)</li><li><strong>Neighbor IP</strong>: The host side of the veth pair</li><li><strong>Address families</strong>: IPv4 and/or IPv6 unicast</li></ul><h2 id=control-plane-operations>Control Plane Operations
<a class=anchor href=#control-plane-operations>#</a></h2><h3 id=route-advertisement-host--fabric>Route Advertisement (Host → Fabric)
<a class=anchor href=#route-advertisement-host--fabric>#</a></h3><p><img src=/images/openpeadvertisepassthrough.svg alt></p><p>When a BGP-speaking component on the host advertises routes:</p><ol><li>The host establishes a BGP session with OpenPERouter using the veth interface IP</li><li>Routes are advertised with the veth interface IP as the next hop</li><li>OpenPERouter receives the routes and installs them in the global routing table</li><li>OpenPERouter advertises these routes to the fabric neighbors</li><li>The fabric learns the routes with OpenPERouter&rsquo;s router ID as the next hop</li></ol><h3 id=route-reception-fabric--host>Route Reception (Fabric → Host)
<a class=anchor href=#route-reception-fabric--host>#</a></h3><p>When routes are received from the fabric:</p><ol><li>OpenPERouter receives routes from fabric neighbors</li><li>Routes are installed in the global routing table</li><li>OpenPERouter advertises these routes to the host via the BGP session</li><li>The host&rsquo;s BGP-speaking component learns and installs the routes</li><li>Traffic can now be routed directly to the learned destinations</li></ol><h2 id=data-plane-operations>Data Plane Operations
<a class=anchor href=#data-plane-operations>#</a></h2><h3 id=traffic-flow>Traffic Flow
<a class=anchor href=#traffic-flow>#</a></h3><p>In passthrough mode, traffic flows directly without encapsulation:</p><p><img src=/images/openpeadvertisedatapassthrough.svg alt></p><ol><li><strong>Host Routing</strong>: Traffic is routed to the veth interface</li><li><strong>Direct Forwarding</strong>: OpenPERouter forwards traffic directly to fabric interfaces</li><li><strong>Fabric Routing</strong>: The fabric routes traffic to the destination</li><li><strong>Return Path</strong>: Return traffic follows the same direct path</li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#key-characteristics>Key Characteristics</a><ul><li><a href=#direct-bgp-participation>Direct BGP Participation</a></li><li><a href=#no-isolation>No Isolation</a></li></ul></li><li><a href=#architecture-components>Architecture Components</a><ul><li><a href=#veth-pair-configuration>Veth Pair Configuration</a></li><li><a href=#ip-allocation-strategy>IP Allocation Strategy</a></li><li><a href=#bgp-session-configuration>BGP Session Configuration</a></li></ul></li><li><a href=#control-plane-operations>Control Plane Operations</a><ul><li><a href=#route-advertisement-host--fabric>Route Advertisement (Host → Fabric)</a></li><li><a href=#route-reception-fabric--host>Route Reception (Fabric → Host)</a></li></ul></li><li><a href=#data-plane-operations>Data Plane Operations</a><ul><li><a href=#traffic-flow>Traffic Flow</a></li></ul></li></ul></nav></div></aside></main></body></html>